<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adriana Sousa - Transforma√ß√£o Pessoal</title>
    <!-- Preload das imagens cr√≠ticas -->
    <link rel="preload" as="image" href="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png">
    <link rel="preload" as="image" href="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Imagem%20do%20WhatsApp%20de%202025-09-23%20%C3%A0(s)%2015.21.04_61513830-vmake.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #F8F5F0;
            --text: #33353A;
            --accent: #D4AF37;
            --dark: #1A2035;
            --white: #ffffff;
            --purple: #7C3AED;
            --gold-gradient: linear-gradient(135deg, #D4AF37 0%, #FFD700 70%, #B8860B 100%);
            --shadow-luxury: 0 15px 50px rgba(26, 32, 53, 0.2);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #F8F5F0 0%, #E8E5E0 100%);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-attachment: fixed;
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            padding: 15px;
            position: relative;
        }

        /* AVATAR SECTION */
        .avatar-section {
            text-align: center;
            padding: 20px 15px 15px;
            background: var(--white);
            margin-bottom: 20px;
            border-radius: 20px;
            box-shadow: var(--shadow-luxury);
            border: 2px solid rgba(212, 175, 55, 0.3);
            margin-top: 15px;
            transition: all 1s ease;
        }

        .name {
            font-size: 26px;
            font-weight: 900;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 4px;
        }

        .specialty {
            font-size: 15px;
            font-weight: 700;
            color: var(--purple);
            margin-bottom: 12px;
        }

        .avatar-container {
            position: relative;
            display: flex;
            justify-content: center;
            margin: 15px 0 20px 0;
        }

        .avatar {
            width: 260px;
            height: 390px;
            object-fit: cover;
            border-radius: 20px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            box-shadow: var(--shadow-luxury);
            transition: all 0.5s ease;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            will-change: transform;
            pointer-events: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }

        .avatar-message {
            position: absolute;
            top: 25%;
            left: 55%;
            transform: translateX(-50%);
            width: 150px;
            font-size: 14px;
            font-weight: 900;
            color: var(--dark);
            text-align: center;
            opacity: 0;
            transition: all 0.6s ease;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.9);
            padding: 6px 8px;
            background: transparent;
            border-radius: 0;
            line-height: 1.3;
        }

        .avatar-message.show {
            opacity: 1;
            transform: translateX(-50%) scale(1);
        }

        .avatar-message.shock {
            color: #DC2626;
            font-size: 16px;
        }

        /* CTA SECTION */
        .cta-section {
            display: none;
            text-align: center;
            padding: 25px 20px;
            background: var(--white);
            border-radius: 20px;
            box-shadow: var(--shadow-luxury);
            border: 2px solid rgba(212, 175, 55, 0.3);
            margin-top: 20px;
            opacity: 0;
            transition: all 1s ease;
        }

        .cta-section.active {
            display: block;
            opacity: 1;
        }

        .cta-title {
            font-size: 24px;
            font-weight: 900;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            line-height: 1.3;
        }

        .cta-subtitle {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .cta-input {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            background: var(--white);
            color: var(--text);
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .cta-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 8px 35px rgba(212, 175, 55, 0.3);
            transform: translateY(-2px);
        }

        .cta-button {
            display: inline-block;
            background: var(--gold-gradient);
            color: var(--dark);
            text-decoration: none;
            padding: 18px 35px;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 900;
            text-transform: uppercase;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-luxury);
            margin-bottom: 15px;
            cursor: pointer;
            border: none;
        }

        .cta-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 20px 60px rgba(212, 175, 55, 0.6);
        }

        .cta-disclaimer {
            font-size: 12px;
            color: #666;
            font-weight: 600;
        }

        .privacy-link {
            margin: 8px 0 15px 0;
            text-align: center;
        }

        .privacy-link a:hover {
            color: #666;
        }

        /* TYPEBOT CONTAINER */
        .typebot-embed-section {
            display: none;
            width: 100%;
            min-height: 80vh;
            margin-top: 20px;
        }

        .typebot-container {
            width: 100%;
            height: 80vh;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-luxury);
            border: 2px solid rgba(212, 175, 55, 0.3);
        }

        /* RESPONSIVE */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .avatar {
                width: 220px;
                height: 330px;
            }
            
            .avatar-message {
                width: 130px;
                font-size: 12px;
            }
            
            .name {
                font-size: 22px;
            }
            
            .cta-title {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- AVATAR SECTION -->
        <section class="avatar-section" id="avatarSection">
            <h1 class="name">Adriana Sousa</h1>
            <p class="specialty">Especialista em Transforma√ß√£o Pessoal</p>
            
            <div class="avatar-container">
                <img src="https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png" 
                     alt="Adriana Sousa" 
                     class="avatar" 
                     id="mainAvatar">
                <div class="avatar-message" id="avatarMessage">Ol√°...</div>
            </div>
        </section>

        <!-- CTA SECTION -->
        <section class="cta-section" id="ctaSection">
            <h2 class="cta-title" id="ctaTitle">Como os que mais te AMAM te CHAMAM?</h2>
            <p class="cta-subtitle" id="ctaSubtitle">Desenvolvimento pessoal personalizado</p>
            
            <input type="text" 
                   class="cta-input" 
                   id="userName" 
                   placeholder="Digite seu nome aqui..."
                   maxlength="50">
            
            <p class="privacy-link">
                <a href="#privacy" style="color: #999; font-size: 11px; text-decoration: none;">Pol√≠tica de Privacidade</a>
            </p>
            
            <small style="color: #ccc; font-size: 10px;">
                ‚úì Maiores de 18 anos | ‚úì Certificada em Coaching
            </small>
            
            <p class="cta-disclaimer" id="ctaDisclaimer"></p>
        </section>

        <!-- TYPEBOT EMBED SECTION -->
        <section class="typebot-embed-section" id="typebotEmbedSection">
            <div class="typebot-container" id="typebot-container">
                <!-- Typebot ser√° carregado aqui -->
            </div>
        </section>
    </div>

    <script>
        // ==================== CONTEXTOS DO BROWSER (META SAFE) ====================
        
        const BROWSER_CONTEXTS = {
            getTimeMessage: function(hora, dispositivo) {
                const agora = new Date();
                const periodo = agora.getHours();
                
                if (periodo >= 5 && periodo < 12) {
                    return `Manh√£ no seu ${dispositivo}`;
                } else if (periodo >= 12 && periodo < 18) {
                    return `Tarde no seu ${dispositivo}`;
                } else if (periodo >= 18 && periodo < 23) {
                    return `Noite no seu ${dispositivo}`;
                } else {
                    return `Madrugada no seu ${dispositivo}`;
                }
            },
            
            getDeviceMessage: function(dispositivo) {
                const messages = {
                    'iPhone': 'Que alegria, um iPhone! ‚ú®',
                    'iPad': 'Opa, um iPad! Perfeito! ‚ú®',
                    'Android': 'Android chegou! Que bom! ‚ú®',
                    'Mac': 'Mac na √°rea! Adorei! ‚ú®',
                    'Computador': 'Computador ligado! Show! ‚ú®'
                };
                return messages[dispositivo] || 'Que tecnologia bacana! ‚ú®';
            }
        };

        // ==================== CAPTURAR DADOS LOCAIS SEM API (META SAFE) ====================
        
        function capturarDadosLocaisSemAPI() {
            try {
                // HOR√ÅRIO LOCAL (100% SEGURO)
                const agora = new Date();
                const hora = agora.getHours();
                const minuto = agora.getMinutes();
                const diaSemana = agora.getDay();
                
                const horaFormatada = `${hora}:${minuto.toString().padStart(2,'0')}`;
                
                const diasSemana = [
                    'domingo', 'segunda-feira', 'ter√ßa-feira', 'quarta-feira',
                    'quinta-feira', 'sexta-feira', 's√°bado'
                ];
                const diaAtual = diasSemana[diaSemana];
                
                let parteDia;
                if (hora >= 5 && hora < 12) parteDia = 'manh√£';
                else if (hora >= 12 && hora < 18) parteDia = 'tarde';
                else if (hora >= 18 && hora < 23) parteDia = 'noite';
                else parteDia = 'madrugada';

                // DETEC√á√ÉO DE ESTADO SEM API
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                let estadoDetectado = 'BR';
                
                // Mapeamento b√°sico e seguro
                if (timezone.includes('Sao_Paulo') || timezone.includes('America/Sao_Paulo')) {
                    estadoDetectado = 'SP';
                } else if (timezone.includes('Manaus')) {
                    estadoDetectado = 'AM';
                } else if (timezone.includes('Recife')) {
                    estadoDetectado = 'PE';
                }

                // Idioma do browser
                const linguagem = navigator.language || navigator.userLanguage;
                const brasileiro = linguagem.includes('pt-BR') || linguagem.includes('pt');

                // UTM parameters (se vier de campanha)
                const urlParams = new URLSearchParams(window.location.search);
                const utmState = urlParams.get('utm_content');
                if (utmState && utmState.length === 2) {
                    estadoDetectado = utmState.toUpperCase();
                }

                return {
                    hora: horaFormatada,
                    dia: diaAtual,
                    periodo: parteDia,
                    estado: estadoDetectado,
                    brasileiro: brasileiro,
                    timezone: timezone,
                    localidade: "Brasil"
                };

            } catch (error) {
                console.error('Erro captura dados:', error);
                
                const agora = new Date();
                return {
                    hora: `${agora.getHours()}:${agora.getMinutes().toString().padStart(2,'0')}`,
                    dia: 'hoje',
                    periodo: 'dia',
                    estado: 'BR',
                    brasileiro: true,
                    localidade: "Brasil"
                };
            }
        }

        function detectBrowserData() {
            const agora = new Date();
            const hora = agora.getHours();
            const minuto = agora.getMinutes();
            const dia = agora.getDay();
            
            // Detec√ß√£o do dispositivo (sem conex√£o)
            const userAgent = navigator.userAgent;
            let dispositivo = "Computador";
            if (userAgent.includes('iPhone')) dispositivo = "iPhone";
            else if (userAgent.includes('iPad')) dispositivo = "iPad";
            else if (userAgent.includes('Android')) dispositivo = "Android";
            else if (userAgent.includes('Mac')) dispositivo = "Mac";
            else if (userAgent.includes('Windows')) dispositivo = "Computador";
            
            // Detec√ß√£o se √© brasileiro
            const brasileiro = navigator.language.includes('pt-BR') || navigator.language.includes('pt');
            
            // Dia da semana
            const diasSemana = ['Domingo', 'Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'];
            const diaNome = diasSemana[dia];
            
            return {
                hora,
                minuto,
                dia: diaNome,
                dispositivo,
                brasileiro,
                horaFormatada: `${hora.toString().padStart(2, '0')}:${minuto.toString().padStart(2, '0')}`
            };
        }

        // ==================== SEQU√äNCIA DO AVATAR ====================
        
        function startAvatarSequence() {
            const message = document.getElementById('avatarMessage');
            
            // Detectar dados do navegador (sem APIs)
            const browserData = detectBrowserData();
            
            // IMPLEMENTA√á√ÉO META SAFE: Capturar dados locais
            const dadosLocais = capturarDadosLocaisSemAPI();
            window.currentLocation = dadosLocais;
            
            // Obter mensagens personalizadas baseadas no navegador
            const timeMessage = BROWSER_CONTEXTS.getTimeMessage(browserData.hora, browserData.dispositivo);
            const deviceMessage = BROWSER_CONTEXTS.getDeviceMessage(browserData.dispositivo);
            
            // Detectar se √© brasileiro para personalizar CTA
            const brasileiro = browserData.brasileiro;
            
            // Sequ√™ncia de 4 mensagens calorosas e r√°pidas
            const messages = [
                "Oie para voc√™! üëã",                                   // 1. Sauda√ß√£o super calorosa
                `${dadosLocais.hora} √© boa ${dadosLocais.periodo}! ‚òÄÔ∏è`, // 2. Hora personalizada
                "Como vai? Que bom ter voc√™ aqui! üíï",                 // 3. Acolhimento genu√≠no  
                brasileiro ? "Bora conversar abaixo? üëá" : "Let's chat below? üëá" // 4. CTA divertido
            ];

            // Executar sequ√™ncia
            executarSequenciaAvatar(message, messages);
        }

        async function executarSequenciaAvatar(message, messages) {
            for (let i = 0; i < messages.length; i++) {
                message.classList.remove('show');
                await sleep(200);
                
                message.textContent = messages[i];
                message.classList.add('show');
                
                // Destaque especial na mensagem do dispositivo (√≠ndice 2)
                if (i === 2) message.classList.add('shock');
                
                // Timing: 2.2s para cada mensagem (mais r√°pido)
                await sleep(2200);
            }

            // Mostrar CTA ap√≥s sequ√™ncia (mais r√°pido)
            setTimeout(() => showCTA(window.currentLocation), 500);
        }

        function showCTA(location) {
            const ctaSection = document.getElementById('ctaSection');
            const ctaTitle = document.getElementById('ctaTitle');
            const ctaSubtitle = document.getElementById('ctaSubtitle');
            const ctaDisclaimer = document.getElementById('ctaDisclaimer');
            const userName = document.getElementById('userName');
            
            // Detectar se √© brasileiro
            const brasileiro = navigator.language.includes('pt-BR') || navigator.language.includes('pt');
            
            // Atualizar textos do CTA
            ctaTitle.textContent = brasileiro ? "Como os que mais te AMAM te CHAMAM?" : "What's your name?";
            ctaSubtitle.textContent = brasileiro ? "Desenvolvimento pessoal personalizado" : "Personalized personal development";
            ctaDisclaimer.textContent = "";
            
            // Simplificar placeholder do input
            userName.placeholder = brasileiro ? "Digite seu nome aqui..." : "Type your name here...";
            
            // Captura autom√°tica do nome - incorpora Typebot quando digitar
            userName.addEventListener('input', function() {
                const nome = this.value.trim();
                if (nome.length >= 2) { // M√≠nimo 2 caracteres
                    // Pequeno delay para dar tempo de terminar de digitar
                    clearTimeout(window.nameTimeout);
                    window.nameTimeout = setTimeout(() => {
                        if (nome.length >= 2) {
                            embedTypebotMetaSafe(nome);
                        }
                    }, 1500); // 1.5 segundos - meio termo ideal
                }
            });
            
            // Enter no input tamb√©m incorpora Typebot
            userName.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const nome = this.value.trim();
                    if (nome.length >= 2) {
                        embedTypebotMetaSafe(nome);
                    }
                }
            });
            
            ctaSection.classList.add('active');
            
            // Scroll autom√°tico imediato e suave
            setTimeout(() => {
                ctaSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'center' 
                });
            }, 200);
            
            // Focar no input ap√≥s scroll
            setTimeout(() => {
                userName.focus();
            }, 600);
        }

        // ==================== EMBED DO TYPEBOT META SAFE ====================
        
        function embedTypebotMetaSafe(nome) {
            // Esconder a se√ß√£o CTA
            const ctaSection = document.getElementById('ctaSection');
            ctaSection.style.display = 'none';
            
            // Mostrar se√ß√£o do Typebot
            const typebotEmbedSection = document.getElementById('typebotEmbedSection');
            typebotEmbedSection.style.display = 'block';
            
            // Capturar dados locais seguros (SEM APIS)
            const dadosLocais = window.currentLocation || capturarDadosLocaisSemAPI();
            
            // Construir URL com dados locais seguros
            const params = new URLSearchParams({
                nome: nome,
                localidade: dadosLocais.localidade,
                hora: dadosLocais.hora,
                dia: dadosLocais.dia,
                periodo: dadosLocais.periodo,
                estado: dadosLocais.estado,
                brasileiro: dadosLocais.brasileiro,
                fonte: 'landing-meta-safe'
            });
            
            const typebotUrl = `https://bot.adrianasousa.com/eu?${params.toString()}`;
            
            console.log('üìä Dados Meta Safe enviados:', dadosLocais);
            
            // Criar iframe do Typebot
            const typebotContainer = document.getElementById('typebot-container');
            typebotContainer.innerHTML = `
                <iframe 
                    src="${typebotUrl}"
                    style="width: 100%; height: 100%; border: none; border-radius: 16px;"
                    frameborder="0"
                    allow="camera; microphone"
                    loading="lazy">
                </iframe>
            `;
            
            // Scroll suave para o Typebot
            setTimeout(() => {
                typebotEmbedSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start' 
                });
            }, 300);
        }

        // ==================== FUN√á√ïES LEGACY (COMPATIBILIDADE) ====================
        
        function startTypebotWithName() {
            const nome = document.getElementById('userName').value.trim();
            
            if (nome && nome.length >= 2) {
                embedTypebotMetaSafe(nome);
            } else {
                const brasileiro = navigator.language.includes('pt-BR') || navigator.language.includes('pt');
                alert(brasileiro ? 'Por favor, digite seu nome primeiro!' : 'Please type your name first!');
            }
        }
        
        function startTypebot() {
            startTypebotWithName();
        }

        function embedTypebot(nome) {
            embedTypebotMetaSafe(nome);
        }

        // ==================== UTILIT√ÅRIOS ====================
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // ==================== INICIALIZA√á√ÉO ====================
        
        // Preload de imagens
        const preloadImages = () => {
            const imageUrls = [
                'https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Adriana-vmake%20(1).png',
                'https://pub-e40d9ad14e5a4e13b2bfe7e2ae67bb03.r2.dev/Imagem%20do%20WhatsApp%20de%202025-09-23%20%C3%A0(s)%2015.21.04_61513830-vmake.jpg'
            ];
            
            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
            });
        };
        
        // Iniciar aplica√ß√£o
        preloadImages();
        
        setTimeout(() => {
            startAvatarSequence();
        }, 1000);
        
    </script>
</body>
</html>
